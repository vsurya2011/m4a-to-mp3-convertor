# render.yaml

services:
  # ---------------------------------------------
  # 1. BACKEND API SERVICE (Docker Web Service)
  # ---------------------------------------------
  - type: web 
    name: m4a-api-service
    runtime: docker 
    rootDir: backend
    # Plan is needed only for the Web Service
    plan: free 
    port: 3000
    envVars:
      - key: NODE_ENV
        value: production

  # ---------------------------------------------
  # 2. FRONTEND UI SERVICE (Static Site)
  # ---------------------------------------------
  - type: web # Type must be 'web'
    name: m4a-ui-static
    
    # Crucial: The runtime MUST be 'static' for a static site in the Blueprint
    runtime: static
    
    rootDir: frontend
    
    # REMOVED: plan: free (Static sites don't use this field)
    
    # This tells Render which directory to publish from
    staticPublishPath: frontend