# render.yaml

services:
  # 1. BACKEND API SERVICE (Docker Web Service)
  - type: web
    name: m4a-api-service
    runtime: docker 
    rootDir: backend
    plan: free
    port: 3000
    envVars:
      - key: NODE_ENV
        value: production

  # 2. FRONTEND UI SERVICE (Static Site)
  - type: static_site # <-- This MUST be the correct type
    name: m4a-ui-static
    rootDir: frontend
    
    # Must be explicitly defined when using a subdirectory
    buildCommand: ""
    publishPath: frontend