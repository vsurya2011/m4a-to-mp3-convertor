# render.yaml

services:
  # ---------------------------------------------
  # 1. BACKEND API SERVICE (Docker Web Service)
  # ---------------------------------------------
  - type: web # Correct type for dynamic server
    name: m4a-api-service
    runtime: docker 
    rootDir: backend
    plan: free
    port: 3000
    envVars:
      - key: NODE_ENV
        value: production

  # ---------------------------------------------
  # 2. FRONTEND UI SERVICE (Static Site)
  # ---------------------------------------------
  - type: web # <--- TYPE IS 'web'
    name: m4a-ui-static
    
    # Crucial: The runtime is 'static' for a static site within the Blueprint
    runtime: static # <--- RUNTIME IS 'static'
    
    rootDir: frontend
    
    # These fields specify the static asset paths
    # Note the change to staticPublishPath as per documentation examples
    buildCommand: ""
    staticPublishPath: frontend # <--- The publishing path name